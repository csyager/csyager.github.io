---
layout: post
title:  "Graduation"
date:   2020-06-18 20:20:00 -0400
categories: blog
---

As a little project about a year and a half ago, I decided to learn a little about networking and turn an old laptop into a server I could run from home.  As I've stated in other posts, that used to be where I hosted an older version of this site, as well as servers for games I could play with my friends and other fun stuff like that.  When I decided to build a web app for my fraternity to use during rush, I wanted to use that server to host that site.  Of course this wasn't really the optimal solution, and eventually connections to the server mysteriously started to be rejected.  On a time crunch for the fraternity site, I decided to abandon it for the time being and look for alternative hosting options.

This weekend I decided to reopen the case and get to the bottom of why it stopped working.  It turned out to be a pretty silly oversight on my part.  Since the router that was forwarding requests to my server was the same Verizon router that my family uses in the house, it isn't configured with a static IP address, and Verizon changed the address on me, hence why none of my requests were going through.  Pretty dumb mistake that wasted several hours of my time, but while investigating the issue I stumbled upon something that made me a little more concerned.  While taking a look at my ssh logs to figure out why my connections weren't going through, I noticed that about every 10 seconds some new username was getting rejected.  The usernames were common, like "sysadmin," or "john," or "root," and all would of course be rejected because I don't have any user accounts using those names.  Even if they did get through the first username check, they would have to know my password to get in.  Regardless, this got me thinking though about the consequences of someone getting access to my computer.  In all honesty there's not a lot that could be taken from me personally, but it could be used to monitor our internet access, run programs that I don't want using my computer, or worse, spread malware to other computers.  All not great.

Last summer while working as a cybersecurity intern, I was pretty bored one day and wanted to check out just how important some of the priciples I was learning were.  So I downloaded a popular open source password cracker called John the Ripper.  The premise behind the program was pretty simple, you supply it with a long word list of common passwords and phrases, and it tries to programmatically crack the password.  Pretty simple, and in my eyes benign.  My password was not listed among the common phrases, so I thought I would be pretty safe.  Just as an experiment, I ran it against my root password.  Between probably 30 seconds and a minute later, the program read my password back to me.

I was blown away.  My password certainly wasn't as great as it should be, but its not terrible.  Still, this was a free program I downloaded and ran on my lunch break.  Anybody could have done this.  Honestly, it scared me pretty straight.  The good news is the botnets that are trying to get into my server at home aren't doing anything this complicated, because it honestly isn't worth the computing power.  It makes more sense to cast a wide net and find the one person using root/password as their login credentials than it does to focus on any one target.  But the lesson is the same, hiding access to my computer behind a flimsy username and password combination isn't going to cut it. 

To fix this problem, I took a couple of steps that I should have done from the get go.  First, in my ssh configuration, I turned off password access and required an RSA key instead.  Then I used ssh keygen to set myself up with a private key to ensure that even if someone got the username/password combo right, they still wouldn't get anywhere without a verified private key.  Still though, this did nothing to take care of the enormous amounts of login attempts the server was seeing every day.  To combat this issue, I installed Fail2ban, a popular blacklisting tool that catches IP addresses trying too many times to get in.  Within about 10 minutes of starting the Fail2ban program I've caught 45 IP addresses, from locations including South Korea, China, and even within the US.  While these places likely don't reflect the origin of the attackers, there is a clear diversity in the attacks.

Moral of the story, you can't be too careful.  Even if you've never had problems before or feel confident in your password, a simple username/password check probably isn't going to cut it for anything open to the internet.  And check your access logs every once in a while!